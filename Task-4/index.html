<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* UI & UX STYLING */
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --accent-blue: #3498db;
            --accent-red: #e74c3c;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 30px;
            border-bottom: 2px solid #e1e1e1;
            padding-bottom: 10px;
        }

        h1 { margin: 0; font-size: 24px; color: var(--text-primary); }
        p.subtitle { color: var(--text-secondary); margin-top: 5px; }

        /* GRID LAYOUT */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        /* CARD STYLING */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease;
        }

        .card:hover { transform: translateY(-2px); }

        .card h2 {
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            margin-top: 0;
        }

        /* KPI CARD (Extreme Weather) */
        .kpi-value {
            font-size: 48px;
            font-weight: bold;
            color: var(--accent-red);
        }
        .kpi-sub { font-size: 14px; color: var(--text-secondary); }

        /* DATA TABLE STYLING */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #eee; }
        th { color: var(--text-secondary); font-weight: 600; font-size: 14px; }
        .highlight { color: var(--accent-blue); font-weight: bold; }

    </style>
</head>
<body>

<div class="dashboard-container">
    <header>
        <h1>Climate Impact Analysis</h1>
        <p class="subtitle">Weather patterns, precipitation, and extreme event correlation (2024)</p>
    </header>

    <div class="grid">
        <div class="card">
            <h2>Extreme Weather Days</h2>
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div>
                    <div class="kpi-value">14</div>
                    <div class="kpi-sub">Days with High Wind & Rain</div>
                </div>
                <div style="font-size: 40px;">⚠️</div>
            </div>
            <p style="font-size: 12px; color: #999; margin-top: 10px;">
                *Defined as >50mm rain & >40km/h wind gusts
            </p>
        </div>

        <div class="card">
            <h2>High Temp Days (>30°C)</h2>
            <div style="height: 200px; width: 100%;">
                <canvas id="tempChart"></canvas>
            </div>
        </div>
    </div>

    <div class="card" style="margin-bottom: 20px;">
        <h2>Top 5 Districts by Total Precipitation</h2>
        <div style="height: 300px;">
            <canvas id="precipChart"></canvas>
        </div>
    </div>

    <div class="card">
        <h2>Most Precipitous Month by District</h2>
        <table>
            <thead>
            <tr>
                <th>District</th>
                <th>Peak Month</th>
                <th>Season</th>
                <th>Avg Rainfall (mm)</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>Colombo</td> <td class="highlight">May</td> <td>Southwest Monsoon</td> <td>350mm</td></tr>
            <tr><td>Kandy</td> <td class="highlight">October</td> <td>Second Inter-monsoon</td> <td>310mm</td></tr>
            <tr><td>Galle</td> <td class="highlight">May</td> <td>Southwest Monsoon</td> <td>400mm</td></tr>
            <tr><td>Nuwara Eliya</td> <td class="highlight">June</td> <td>Southwest Monsoon</td> <td>290mm</td></tr>
            <tr><td>Jaffna</td> <td class="highlight">November</td> <td>Northeast Monsoon</td> <td>280mm</td></tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    // --- 1. Top 5 Districts Chart (Bar) ---
    const ctxPrecip = document.getElementById('precipChart').getContext('2d');
    new Chart(ctxPrecip, {
        type: 'bar',
        data: {
            labels: ['Bandarawela','Badulla', 'Batticaloa', 'Colombo', 'Galle'],
            datasets: [{
                label: 'Total Precipitation (mm)',
                data: [5398.80, 5308.79, 4778.10, 4886.79,  4955.90],
                backgroundColor: 'rgba(52, 152, 219, 0.7)', // Blue
                borderColor: 'rgba(52, 152, 219, 1)',
                borderWidth: 1,
                borderRadius: 5
            }]
        },
        options: {
            indexAxis: 'y', // Makes it Horizontal (Better readability)
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { x: { beginAtZero: true } }
        }
    });

    // --- 2. Temperature Percentage Chart (Doughnut) ---
    const ctxTemp = document.getElementById('tempChart').getContext('2d');
    new Chart(ctxTemp, {
        type: 'doughnut',
        data: {
            labels: ['Above 30°C', 'Below 30°C'],
            datasets: [{
                data: [35, 65], // Your Percentage (e.g., 35% of months/days)
                backgroundColor: [
                    'rgba(231, 76, 60, 0.8)', // Red for Hot
                    'rgba(236, 240, 241, 1)'  // Light Grey for the rest
                ],
                borderWidth: 0,
                hoverOffset: 4
            }]
        },
        options: {
            cutout: '70%', // Makes it a thin ring (Modern Look)
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'right' }
            }
        }
    });
</script>

</body>
</html>